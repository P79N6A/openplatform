!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports){function addEvent(target,type,callback,useCapture){target.addEventListener?target.addEventListener(type,callback,useCapture):target.attachEvent&&target.attachEvent("on"+type,callback)}if(!window.OCMSCtrDot){var OCMSCtrDot=function(){this.initialize()};OCMSCtrDot.prototype={attrs:{delay:1e3,pageParam:"",site:""},length:0,queues:{},curQueues:{},initAttrs:function(){if(this._attrs=this.attrs,""==this.get("site")){var site=location.href.indexOf("1688.com")>=0?"1688":"ICBU";this.set("site",site)}var param="member_id=&login_id=&user_id=&device_id=&envir_type=&os_type=";param+="ICBU"==site?"&scene_id=109":"&scene_id=108",this.set("pageParam",param)},get:function(key){return this._attrs[key]},set:function(key,val){this._attrs[key]=val},initialize:function(){var _this=this;_this.initAttrs(),_this.window=window,addEvent(window,"scroll",function(){_this.onscroll.apply(_this,arguments)}),addEvent(document.body,"click",function(){_this.clickDot.apply(_this,arguments)}),_this.onscroll()},onscroll:function(){var _this=this;_this.scrollTimer&&clearTimeout(_this.scrollTimer),_this.scrollTimer=setTimeout(function(){_this.scrollTimer&&clearTimeout(_this.scrollTimer),_this.calculator(),_this.dot()},_this.get("delay"))},calculator:function(){var scrollTop=document.body.scrollTop,scrollBottom=scrollTop+document.documentElement.clientHeight,oriEls=document.getElementsByClassName&&document.getElementsByClassName("ctrdot-item")||[],parentEls=document.getElementsByClassName&&document.getElementsByClassName(this.get("pElem"))||[],els=[];if(void 0!=parentEls&&parentEls.length>0)for(var i=0,l=oriEls.length;i<l;i++){for(var idx=-1,j=0,k=parentEls.length;j<k;j++)if(this.isChild(oriEls[i],parentEls[j])){idx=j;break}idx!=-1&&this.isHidden(oriEls[i],parentEls[idx])||els.push(oriEls[i])}else els=oriEls;for(var i=0,l=els.length;i<l;i++){var el=els[i];if("hidden"!=el.style.visibility&&"none"!=el.style.display){var data=el.getAttribute("data-ctrdot");if(null==data||data.length<=0)return;var idInfo=data.match(/id:(.*?)(,|$)/),extInfo=data.match(/ext:(.*?)($)/),id=idInfo.length>2?idInfo[1]:"",ext=extInfo.length>2?extInfo[1]:"",top=this.getDocumentOffsetTop(el),height=el.offsetHeight,bottom=top+height,inTop=top+.28*height,inBottom=bottom-.28*height,time=(new Date).getTime()-this.get("delay");this.queues[id]||(this.queues[id]={id:id,ext:ext}),inBottom>scrollTop&&inTop<scrollBottom?(this.queues[id].start&&(this.queues[id].isDot=!1),this.queues[id].start&&!this.queues[id].end||(this.queues[id].start=time,this.queues[id].end=null,this.queues[id].isDot=!0)):this.queues[id].start&&!this.queues[id].end&&(this.queues[id].end=time,this.queues[id].isDot=!0)}}},constructParam:function(dots){var param=[];this.get("pageParam")&&param.push(this.get("pageParam")),param.push("objects="+dots.join(";"));var pageid=window.dmtrack_pageid,aliCookie=document.cookie.match(/ali_beacon_id=(.*?);/);aliCookie=aliCookie&&aliCookie.length>1?aliCookie[1]:aliCookie;var cnaCookie=document.cookie.match(/cna=(.*?);/);return cnaCookie=cnaCookie&&cnaCookie.length>1?cnaCookie[1]:cnaCookie,param.push("st_page_id="+pageid),param.push("ali_beacon_id="+aliCookie),param.push("cna="+cnaCookie),param.push("time="+(new Date).getTime()),param},dot:function(){var dots=[],count=0;for(var id in this.queues)if(this.queues.hasOwnProperty(id)){var dot=this.queues[id];this.queues[id].isDot&&(dots[count]||(dots[count]=[]),dots[count].push("id-"+id+",s-"+(dot.start?dot.start:0)+",e-"+(dot.end?dot.end:0)+(dot.ext?","+dot.ext:"")),dots[count].length/28===1&&(count+=1),this.queues[id].end&&(this.queues[id].isDot=!1))}for(var i=0,l=dots.length;i<l;i++){if("ICBU"==this.get("site"))var logkey="/daalg.2.2",tag="H46717823";else if("1688"==this.get("site"))var logkey="/daalg.1.2",tag="H46717823";for(var currentDots=dots[i];currentDots.length>0;){var tailDots=currentDots.splice(5),param=this.constructParam(currentDots);currentDots=tailDots,goldlog.record(logkey,"",param.join("&"),tag)}}},clickDot:function(e){if(e=window.event?window.event:e){var target=e.target||e.srcElement,item=this.getCtrDotItem(target);if(item){if("ICBU"==this.get("site"))var logkey="/daalg.2.1",tag="H46717801";else if("1688"==this.get("site"))var logkey="/daalg.1.1",tag="H46717801";var idInfo=item.attributes["data-ctrdot"].value.match(/id:(.*?)(,|$)/),id=idInfo.length>2?"id-"+idInfo[1]+",":"",extInfo=item.attributes["data-ctrdot"].value.match(/ext:(.*?)($)/),ext=extInfo.length>2?extInfo[1]:"",info=id+"s-0,e-0,"+ext,param=this.constructParam(Array(info),0);goldlog.record(logkey,"",param.join("&"),tag)}}},reset:function(){this.queues={},this.onscroll()},getDocumentOffsetTop:function(element){if(null!=element.offsetParent){var top=this.getDocumentOffsetTop(element.offsetParent);return element.offsetTop+top}return element.offsetTop},getCtrDotItem:function(e){return void 0==e||null==e||e.getAttribute("data-ctrdot")||e==document.body?e!=document.body&&e:this.getCtrDotItem(e.parentNode)},isHidden:function(elem,pElem){if("hidden"===window.getComputedStyle(pElem).overflow){var pTop=pElem.getBoundingClientRect().top,pBottom=pElem.getBoundingClientRect().bottom,pLeft=pElem.getBoundingClientRect().left,pRight=pElem.getBoundingClientRect().right,cTop=elem.getBoundingClientRect().top,cBottom=elem.getBoundingClientRect().bottom,cLeft=elem.getBoundingClientRect().left,cRight=elem.getBoundingClientRect().right,cHeight=elem.getBoundingClientRect().height,cWidth=elem.getBoundingClientRect().width;return pBottom-cTop<.3*cHeight||cRight-pLeft<.3*cWidth||pRight-cLeft<.3*cWidth||cBottom-pTop<.3*cHeight}return!1},isChild:function(elem,pElem){for(var result;;){if(elem.parentElement==pElem){result=!0;break}if(elem==document.body||elem.parentElement==document.body){result=!1;break}elem=elem.parentElement}return result}},window.OCMSCtrDot=new OCMSCtrDot}}]);